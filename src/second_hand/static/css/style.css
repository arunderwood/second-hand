/* second-hand Dashboard Styles */
/* Terminal/Industrial aesthetic - mission control inspired */

@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap');

:root {
  /* Color palette - industrial greens and ambers */
  --color-bg: #0a0c0a;
  --color-surface: #0d100d;
  --color-surface-hover: #151a15;
  --color-border: #1a2418;
  --color-border-bright: #2a3a28;
  --color-text: #c8d4c0;
  --color-text-muted: #6a7a68;
  --color-text-dim: #404a40;
  --color-accent: #4ade80;
  --color-accent-dim: #22543d;
  --color-success: #4ade80;
  --color-warning: #fbbf24;
  --color-error: #f87171;
  --color-info: #60a5fa;

  /* Terminal colors */
  --terminal-green: #4ade80;
  --terminal-amber: #fbbf24;
  --terminal-cyan: #22d3ee;
  --terminal-red: #f87171;

  /* Typography */
  --font-mono: 'JetBrains Mono', ui-monospace, 'SF Mono', Menlo, monospace;
  --font-sans: 'IBM Plex Sans', system-ui, sans-serif;

  /* Compact spacing */
  --spacing-2xs: 0.125rem;
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.375rem;
  --spacing-md: 0.5rem;
  --spacing-lg: 0.75rem;
  --spacing-xl: 1rem;
  --spacing-2xl: 1.5rem;

  /* Border radius - minimal for industrial look */
  --radius-sm: 2px;
  --radius-md: 3px;
}

/* Reset */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 15px;
  -webkit-font-smoothing: antialiased;
}

body {
  font-family: var(--font-mono);
  background-color: var(--color-bg);
  color: var(--color-text);
  line-height: 1.4;
  min-height: 100vh;
  background-image:
    linear-gradient(rgba(74, 222, 128, 0.01) 1px, transparent 1px),
    linear-gradient(90deg, rgba(74, 222, 128, 0.01) 1px, transparent 1px);
  background-size: 20px 20px;
}

/* Dashboard layout - wider and tighter */
.dashboard {
  max-width: 1600px;
  margin: 0 auto;
  padding: var(--spacing-lg);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* Header - compact */
.dashboard-header {
  display: flex;
  align-items: baseline;
  gap: var(--spacing-xl);
  padding: var(--spacing-md) 0 var(--spacing-lg);
  border-bottom: 1px solid var(--color-border);
  margin-bottom: var(--spacing-xl);
}

.dashboard-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--terminal-green);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  font-family: var(--font-mono);
}

.dashboard-title::before {
  content: "â–¸ ";
  color: var(--color-text-muted);
}

.dashboard-subtitle {
  font-size: 0.85rem;
  color: var(--color-text-muted);
  font-weight: 400;
}

/* Section titles - inline badges */
.section-title {
  display: inline-flex;
  align-items: center;
  font-size: 0.8rem;
  font-weight: 600;
  margin-bottom: var(--spacing-md);
  color: var(--terminal-green);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  padding: var(--spacing-xs) var(--spacing-md);
  background: var(--color-accent-dim);
  border-radius: var(--radius-sm);
  border-left: 2px solid var(--terminal-green);
}

/* =============================================================================
   TRACKING SECTION - Compact grid layout
   ============================================================================= */

.tracking-section {
  margin-bottom: var(--spacing-xl);
}

/* Stats grid - tighter, more columns */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 1px;
  background: var(--color-border);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-md);
}

/* Stat box - minimal, dense */
.stat-box {
  background-color: var(--color-surface);
  padding: var(--spacing-sm) var(--spacing-md);
  transition: background-color 0.15s ease;
  position: relative;
  overflow: visible;
}

.stat-box:hover {
  background-color: var(--color-surface-hover);
}

.stat-title {
  font-size: 0.7rem;
  font-weight: 500;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: var(--spacing-2xs);
  white-space: nowrap;
}

.stat-value {
  font-size: 1.05rem;
  font-weight: 600;
  font-family: var(--font-mono);
  color: var(--terminal-green);
  white-space: nowrap;
}

/* Status-based coloring for stat boxes */
.stat-box[data-status="success"] .stat-value {
  color: var(--color-success);
}

.stat-box[data-status="warning"] .stat-value {
  color: var(--color-warning);
}

.stat-box[data-status="error"] .stat-value {
  color: var(--color-error);
}

/* =============================================================================
   DATA TABLES - Compact and dense
   ============================================================================= */

.sources-section,
.stats-section,
.rtc-section {
  margin-bottom: var(--spacing-xl);
}

.data-table {
  width: 100%;
  border-collapse: collapse;
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 0.9rem;
}

.data-table thead {
  background-color: var(--color-border);
}

.data-table th {
  padding: var(--spacing-sm) var(--spacing-md);
  text-align: left;
  font-weight: 600;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--terminal-green);
  border-bottom: 1px solid var(--color-border-bright);
  white-space: nowrap;
}

.data-table td {
  padding: var(--spacing-sm) var(--spacing-md);
  font-family: var(--font-mono);
  font-size: 0.9rem;
  border-bottom: 1px solid var(--color-border);
  color: var(--color-text);
}

.data-table tbody tr:last-child td {
  border-bottom: none;
}

.data-table tbody tr:hover {
  background-color: var(--color-surface-hover);
}

/* Numeric alignment in tables */
.data-table td.stratum,
.data-table td.samples,
.data-table td.runs {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

/* =============================================================================
   SOURCE ROW STATES
   ============================================================================= */

.source-row.selected,
tr.source-selected {
  background-color: rgba(74, 222, 128, 0.08);
  border-left: 2px solid var(--terminal-green);
}

.source-row.selected:hover,
tr.source-selected:hover {
  background-color: rgba(74, 222, 128, 0.12);
}

tr.source-falseticker {
  background-color: rgba(248, 113, 113, 0.08);
  border-left: 2px solid var(--terminal-red);
}

tr.source-falseticker:hover {
  background-color: rgba(248, 113, 113, 0.12);
}

tr.source-unreachable {
  opacity: 0.4;
}

tr.source-jittery {
  background-color: rgba(251, 191, 36, 0.08);
  border-left: 2px solid var(--terminal-amber);
}

tr.source-jittery:hover {
  background-color: rgba(251, 191, 36, 0.12);
}

/* =============================================================================
   REACHABILITY VISUALIZATION - Compact inline
   ============================================================================= */

.reach-visual {
  display: inline-flex;
  gap: 1px;
  margin-right: var(--spacing-xs);
  vertical-align: middle;
}

.reach-bit {
  display: inline-block;
  width: 5px;
  height: 10px;
  border-radius: 1px;
}

.reach-bit.success {
  background-color: var(--terminal-green);
}

.reach-bit.failure {
  background-color: var(--color-border-bright);
}

/* =============================================================================
   HEALTH STATUS INDICATORS
   ============================================================================= */

.status-healthy {
  color: var(--color-success);
}

.status-warning {
  color: var(--color-warning);
}

.status-error {
  color: var(--color-error);
}

/* Offset direction */
.offset-positive {
  color: var(--terminal-cyan);
}

.offset-negative {
  color: var(--terminal-amber);
}

/* =============================================================================
   RTC SECTION - Compact grid
   ============================================================================= */

.rtc-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 1px;
  background: var(--color-border);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
}

.rtc-stat {
  background-color: var(--color-surface);
  padding: var(--spacing-sm) var(--spacing-md);
}

.rtc-stat-title {
  font-size: 0.7rem;
  font-weight: 500;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: var(--spacing-2xs);
}

.rtc-stat-value {
  font-size: 1rem;
  font-weight: 600;
  font-family: var(--font-mono);
  color: var(--terminal-green);
}

.rtc-unavailable {
  background-color: var(--color-surface);
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
}

.unavailable-message {
  color: var(--color-text-dim);
  font-style: italic;
  text-align: center;
  font-size: 0.8rem;
}

/* =============================================================================
   TOOLTIPS - Compact
   ============================================================================= */

.tooltip-trigger {
  position: relative;
  cursor: help;
  border-bottom: 1px dotted var(--color-text-muted);
}

.tooltip-trigger[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 100%;
  margin-left: 40px;
  background: #1a2a1a;
  color: var(--color-text);
  padding: 8px 12px;
  border-radius: 4px;
  border: 1px solid var(--terminal-green);
  font-size: 0.8rem;
  font-family: var(--font-sans);
  font-weight: normal;
  text-transform: none;
  letter-spacing: normal;
  white-space: normal;
  max-width: 280px;
  min-width: 180px;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease;
  z-index: 9999;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.6);
  pointer-events: none;
  line-height: 1.4;
}

.tooltip-trigger:hover::after {
  opacity: 1;
  visibility: visible;
}

.tooltip-trigger:focus {
  outline: 1px solid var(--terminal-green);
  outline-offset: 2px;
}

.tooltip-trigger:focus::after {
  opacity: 1;
  visibility: visible;
}

.data-table th .tooltip-trigger {
  border-bottom: none;
}

.data-table th .tooltip-trigger::after {
  text-transform: none;
  font-weight: normal;
}

/* Screen reader only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* =============================================================================
   ERROR STATES
   ============================================================================= */

.error-banner {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  background-color: rgba(248, 113, 113, 0.1);
  border: 1px solid var(--terminal-red);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm) var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.error-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.25rem;
  height: 1.25rem;
  background-color: var(--terminal-red);
  color: var(--color-bg);
  border-radius: 50%;
  font-weight: 700;
  font-size: 0.8rem;
  flex-shrink: 0;
}

.error-content {
  flex: 1;
}

.error-banner .error-message {
  font-size: 0.8rem;
  color: var(--color-text);
  margin: 0;
}

.empty-message {
  background-color: var(--color-surface);
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  color: var(--color-text-dim);
  font-style: italic;
  text-align: center;
  font-size: 0.8rem;
}

/* =============================================================================
   FOOTER - Minimal
   ============================================================================= */

.dashboard-footer {
  padding: var(--spacing-md) 0;
  border-top: 1px solid var(--color-border);
  margin-top: auto;
}

.version {
  font-size: 0.7rem;
  color: var(--color-text-dim);
  font-family: var(--font-mono);
}

/* =============================================================================
   ERROR PAGE
   ============================================================================= */

.error-page {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: var(--spacing-lg);
}

.error-container {
  text-align: center;
}

.error-code {
  font-size: 4rem;
  font-weight: 700;
  color: var(--terminal-red);
  line-height: 1;
  margin-bottom: var(--spacing-md);
  font-family: var(--font-mono);
}

.error-message {
  font-size: 1rem;
  color: var(--color-text-muted);
  margin-bottom: var(--spacing-xl);
}

.error-link {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-md);
  background-color: var(--terminal-green);
  color: var(--color-bg);
  text-decoration: none;
  border-radius: var(--radius-sm);
  font-weight: 500;
  font-size: 0.85rem;
  transition: background-color 0.15s ease;
}

.error-link:hover {
  background-color: var(--color-accent-dim);
  color: var(--terminal-green);
}

/* =============================================================================
   COUNTRY FLAGS
   ============================================================================= */

.country-flag {
  font-size: 1.1em;
  cursor: help;
  position: relative;
}

.country-flag[title]:hover::after {
  content: attr(title);
  position: absolute;
  bottom: 100%;
  left: 0;
  margin-bottom: 4px;
  background: #1a2a1a;
  color: var(--color-text);
  padding: 4px 8px;
  border-radius: 3px;
  border: 1px solid var(--terminal-green);
  font-size: 0.75rem;
  font-family: var(--font-sans);
  white-space: nowrap;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* =============================================================================
   HOSTNAME DISPLAY
   ============================================================================= */

.source-hostname {
  color: var(--color-text);
}

.source-ip {
  color: var(--color-text-muted);
  font-size: 0.9em;
}

/* =============================================================================
   MODE BADGES
   ============================================================================= */

.mode-badge {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  cursor: help;
}

.mode-badge--server {
  background-color: rgba(74, 222, 128, 0.15);
  color: var(--terminal-green);
  border: 1px solid rgba(74, 222, 128, 0.3);
}

.mode-badge--peer {
  background-color: rgba(96, 165, 250, 0.15);
  color: var(--color-info);
  border: 1px solid rgba(96, 165, 250, 0.3);
}

.mode-badge--refclock {
  background-color: rgba(168, 85, 247, 0.15);
  color: #a855f7;
  border: 1px solid rgba(168, 85, 247, 0.3);
}

/* =============================================================================
   SELECTED SOURCE ANIMATION
   ============================================================================= */

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.4);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(74, 222, 128, 0);
  }
}

tr.source-selected {
  animation: pulse 2s ease-in-out infinite;
}

/* Respect user preference for reduced motion */
@media (prefers-reduced-motion: reduce) {
  tr.source-selected {
    animation: none;
    border-left: 3px solid var(--terminal-green);
  }
}

/* =============================================================================
   REACHABILITY SPARKLINE TOOLTIP
   ============================================================================= */

.reach-visual[title] {
  cursor: help;
}

.reach-visual[title]:hover::after {
  content: attr(title);
  position: absolute;
  bottom: 100%;
  left: 0;
  margin-bottom: 4px;
  background: #1a2a1a;
  color: var(--color-text);
  padding: 4px 8px;
  border-radius: 3px;
  border: 1px solid var(--terminal-green);
  font-size: 0.75rem;
  font-family: var(--font-sans);
  white-space: nowrap;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* =============================================================================
   STALE DATA WARNING
   ============================================================================= */

.stale-warning {
  display: none;
  background-color: rgba(251, 191, 36, 0.15);
  border: 1px solid var(--terminal-amber);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm) var(--spacing-md);
  margin-bottom: var(--spacing-lg);
  font-size: 0.85rem;
  color: var(--terminal-amber);
}

/* =============================================================================
   RESPONSIVE
   ============================================================================= */

@media (max-width: 768px) {
  html {
    font-size: 14px;
  }

  .dashboard {
    padding: var(--spacing-md);
  }

  .dashboard-header {
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .data-table {
    font-size: 0.85rem;
  }

  .data-table th,
  .data-table td {
    padding: var(--spacing-xs);
  }
}

@media (min-width: 1920px) {
  .dashboard {
    max-width: 1800px;
  }

  html {
    font-size: 16px;
  }
}
